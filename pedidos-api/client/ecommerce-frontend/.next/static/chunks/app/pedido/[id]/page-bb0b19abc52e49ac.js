(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{3462:(e,t,a)=>{Promise.resolve().then(a.bind(a,5061))},5061:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),n=a(2115),r=a(5695),l=a(6072),o=a(7772);let i=e=>fetch(e).then(e=>e.json());function d(){let{id:e}=(0,r.useParams)(),[t,a]=(0,n.useState)(""),[d,c]=(0,n.useState)(""),{data:u,error:h,mutate:p}=(0,l.Ay)("/api/pedidos/".concat(e),i),x=async()=>{try{a("Atualizando status...");let o=await fetch("/api/pedidos/".concat(e,"/status"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:d})}),i=await o.json();if(o.ok)a("✅ Status atualizado com sucesso."),p();else{var t,s,n,r,l;let e=null!=(t=i.detalhe)?t:{};a(["❌ Erro: ".concat(null!=(s=e.message)?s:"Erro ao atualizar status."),"Status atual: ".concat(null!=(n=e.status_atual)?n:"desconhecido"),"Tentando ir para: ".concat(null!=(r=e.tentando_ir_para)?r:"desconhecido"),"Permitidos: ".concat((null!=(l=e.permitidos)?l:[]).join(", ")||"nenhum")].join("\n"))}}catch(e){a("Erro inesperado ao tentar atualizar o status.")}};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Detalhes do Pedido"}),h?(0,s.jsx)("p",{className:"text-red-600",children:"Erro ao carregar pedido"}):u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"ID:"})," ",u.id]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"ID do Usu\xe1rio:"})," ",u.id_usuario]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",u.status]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Total:"})," R$ ",Number(u.total_valor).toFixed(2)]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Atualizar Status"}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"border p-2 rounded mb-2",children:[(0,s.jsx)("option",{value:"",children:"Selecione um status"}),Object.values(o.W).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:x,children:"Atualizar Status"})]}),t&&(0,s.jsx)("p",{className:"mt-4 text-sm text-center whitespace-pre-wrap",children:t}),(0,s.jsx)("h2",{className:"text-xl font-semibold mt-6",children:"Itens:"}),(0,s.jsx)("ul",{className:"list-disc ml-6",children:u.itens.map((e,t)=>(0,s.jsxs)("li",{children:["Produto ID: ",e.id_produto," – Quantidade: ",e.quantidade]},t))})]}):(0,s.jsx)("p",{children:"Carregando..."})]})}},7772:(e,t,a)=>{"use strict";a.d(t,{W:()=>s});var s=function(e){return e.PENDENTE="pendente",e.PROCESSANDO="processando",e.ENVIADO="enviado",e.ENTREGUE="entregue",e.CANCELADO="cancelado",e}({})}},e=>{var t=t=>e(e.s=t);e.O(0,[498,441,684,358],()=>t(3462)),_N_E=e.O()}]);