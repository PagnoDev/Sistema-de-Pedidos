"use strict";(()=>{var e={};e.id=662,e.ids=[662],e.modules={666:e=>{e.exports=require("cookie")},1428:e=>{e.exports=import("axios")},3480:(e,t,o)=>{e.exports=o(5600)},4195:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.r(t),o.d(t,{config:()=>l,default:()=>d,routeModule:()=>p});var n=o(3480),a=o(8667),i=o(6435),s=o(6770),u=e([s]);s=(u.then?(await u)():u)[0];let d=(0,i.M)(s,"default"),l=(0,i.M)(s,"config"),p=new n.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/login",pathname:"/api/login",bundlePath:"",filename:""},userland:s});r()}catch(e){r(e)}})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},6770:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.r(t),o.d(t,{default:()=>s});var n=o(1428),a=o(666),i=e([n]);async function s(e,t){if("POST"==e.method)try{let o=(await n.default.post("http://localhost:8000/api/login",e.body)).data.token;if(!o)return t.status(401).json({error:"Token n\xe3o fornecido"});return t.setHeader("Set-Cookie",(0,a.serialize)("token",o,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:86400})),t.status(200).json({ok:!0})}catch(e){return t.status(e?.response?.status||500).json({error:"Erro ao fazer login",detalhe:e?.response?.data||null})}return"DELETE"===e.method?(t.setHeader("Set-Cookie",(0,a.serialize)("token","",{path:"/",httpOnly:!0,maxAge:-1})),t.status(200).json({message:"Logout realizado com sucesso."})):t.status(405).json({error:"M\xe9todo n\xe3o permitido"})}n=(i.then?(await i)():i)[0],r()}catch(e){r(e)}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../webpack-api-runtime.js");t.C(e);var o=t(t.s=4195);module.exports=o})();